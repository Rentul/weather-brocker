Автор: Захаров Валерий

Веб-приложение “Погодный брокер”.

Приложение состоит из 4 модулей.

1.	Модуль admin-api используется для введения названия города, по которому нужно совершить запрос на получение погоды от Yahoo. Модуль состоит из jsp-страницы и сервиса по отправке jms сообщений. На jsp-странице имеется форма с окошком для ввода данных, кнопкой для отправки введенных в форму данных и строки состояния. После введения данных в форму и отправки на сервер, данные конвертируются в jms-сообщение и складываются в очередь.

2.	Модуль weather-yahoo получает прогноз погоды от Yahoo по полученному названю города. Модуль состоит из сервисов по приему и отправке jms-сообщений, по отправке запросов к Yahoo, а также основного сервиса, соединяющего все воедино. Приемник jms-сообщений достает их из очереди, конвертирует в текстовый формат и отправляет в основной сервис. Далее сообщение отправляется сервису по отправке запросов к Yahoo, где формируется и отправляется соответствующий запрос. Полученный в формате json ответ преобразуется в основном сервисе в формат java-объектов, которые упаковываются в jms и отправляются в очередь сообщений.

3.	 Модуль db-service работает с базой данных, хранящей прогнозы погоды. Он состоит из сервиса по приему jms-сообщений, основного сервиса программы, dao-классов, entity-классов. Приемник jms-соощений достает их из очереди. Полученные объекты конвертируются в entity-классы и сохраняются в бд. Основной сервис через hessian-remote-proxy предоставляется другим модулям программы, чтобы они могли работать через него с БД.

4.	Модуль weather-service служит для получения прогнозов погоды из БД через remote-proxy сервис. Модуль состоит из контроллера и интерфейса для работы с сервисом модуля db-service, получаемого при помощи hessian. Приходящие на контроллер запросы конвертируются в запросы к remote-сервису, который достает необходимые данные из БД и отправляет контроллеру. Он в свою очередь отсылает данные обратно пользователю.

Проект собирается сборщиком maven.
В качестве Application Server использовуется WildFly. JMS-брокер в нем есть встроенный. Все Connections, JMS-queue конфигурируются на стороне Application Server и доступны в приложении через JNDI.
В качестве СУБД используется PostgreSQL.
Сервис отправки запроса в yahoo упаковывается в jar.

Для запуска приложения необходимо задеплоить его на сервер приложений. Для этого необходимо установить сервер приложений, подключить jms-брокер, добавить jms-очереди, установить драйвер БД и саму БД, добавить соответствующую схему и таблицы. После этого неообходимо собрать модули в war, все кроме weather-yahoo, который упаковывается в jar. После этого можно деплоить приложение на сервер. Обязательно надо проверить JNDI названия, название схемы БД, таблиц и связей между ними.